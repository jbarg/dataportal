<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns1:DataGridRequest xmlns:ns1="http://www.teragrid.org/schemas/datagrid"><ns1:GridUser><ns1:userID>Matrix-demo</ns1:userID><ns1:organization><ns1:organizationName>sdsc</ns1:organizationName></ns1:organization><ns1:challenge-Response>******</ns1:challenge-Response><ns1:homeDirectory>/home/Matrix-demo.sdsc</ns1:homeDirectory><ns1:defaultStorageResource>sfs-tape2-dtf</ns1:defaultStorageResource></ns1:GridUser><ns1:VOInfo><ns1:server>orion.sdsc.edu</ns1:server><ns1:port>7824</ns1:port></ns1:VOInfo><ns1:Flow flowID="outerFlow"><ns1:variables/><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Flow flowID="makeTestDirFlow"><ns1:variables/><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Step stepID="makeTestDirStep"><ns1:Operation><ns1:CreateOp><ns1:StdParams><ns1:DatagridObject><ns1:CollectionNow><ns1:StdCollection><ns1:collectionName>myTestDir</ns1:collectionName></ns1:StdCollection></ns1:CollectionNow></ns1:DatagridObject></ns1:StdParams></ns1:CreateOp></ns1:Operation></ns1:Step></ns1:Flow><ns1:Flow flowID="createFilesLoop"><ns1:variables/><ns1:flowLogic><ns1:forLoop><ns1:init name="initAction"><ns1:actionString>SET i = 0</ns1:actionString></ns1:init><ns1:forCondition><ns1:simpleQuery>$i &lt; 10</ns1:simpleQuery></ns1:forCondition><ns1:iterator name="incrementAction"><ns1:actionString>SET i = $i+1</ns1:actionString></ns1:iterator></ns1:forLoop></ns1:flowLogic><ns1:Flow flowID="createFilesIteration"><ns1:variables/><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Step stepID="ingestFile"><ns1:Operation><ns1:IngestOp><ns1:StdParams><ns1:externalURL>"http://www.google.com"</ns1:externalURL><ns1:DataDestination><ns1:StdDataSet><ns1:dataIdentifier>myTestDir/file+$i</ns1:dataIdentifier></ns1:StdDataSet></ns1:DataDestination></ns1:StdParams></ns1:IngestOp></ns1:Operation></ns1:Step></ns1:Flow></ns1:Flow><ns1:Flow flowID="processFilesFlow"><ns1:variables><ns1:part name="collectionList"><ns1:string>empty</ns1:string></ns1:part></ns1:variables><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Flow flowID="getListingFlow"><ns1:variables/><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Step stepID="getListingStep"><ns1:UserDefinedRules name="afterExit"><ns1:condition><ns1:simpleQuery>true</ns1:simpleQuery></ns1:condition><ns1:action name="true"><ns1:actionString>SET collectionList = getProperty(THIS, "result.listResult.listing")</ns1:actionString></ns1:action></ns1:UserDefinedRules><ns1:Operation><ns1:ListOp><ns1:StdParams><ns1:collection><ns1:StdCollection><ns1:collectionName>myTestDir</ns1:collectionName></ns1:StdCollection></ns1:collection></ns1:StdParams></ns1:ListOp></ns1:Operation></ns1:Step></ns1:Flow><ns1:Flow flowID="forEachFlow"><ns1:variables/><ns1:flowLogic><ns1:forEachLoop><ns1:iterationSet iterationVariableName="file"><ns1:collectionListing><ns1:CollectionListReference><ns1:variableName>$collectionList</ns1:variableName></ns1:CollectionListReference></ns1:collectionListing></ns1:iterationSet><ns1:parallel-init>0</ns1:parallel-init><ns1:parallel-increment>1</ns1:parallel-increment></ns1:forEachLoop></ns1:flowLogic><ns1:Flow flowID="switch"><ns1:variables/><ns1:flowLogic><ns1:switch-block><ns1:switch><ns1:simpleQuery>endsWith($file, "1") || endsWith($file, "3") || endsWith($file, "5")</ns1:simpleQuery></ns1:switch></ns1:switch-block></ns1:flowLogic><ns1:Step stepID="1.0"><ns1:Operation><ns1:IngestMetadataOp><ns1:StdParams><ns1:DataGridObject><ns1:CollectionNow><ns1:StdCollection><ns1:collectionName>myTestDir</ns1:collectionName></ns1:StdCollection></ns1:CollectionNow></ns1:DataGridObject><ns1:Metadata><ns1:AVU-pairs><ns1:attribute>$file</ns1:attribute><ns1:value>endsWith_1_3_5</ns1:value></ns1:AVU-pairs></ns1:Metadata></ns1:StdParams></ns1:IngestMetadataOp></ns1:Operation></ns1:Step><ns1:Step stepID="0.0"><ns1:Operation><ns1:IngestMetadataOp><ns1:StdParams><ns1:DataGridObject><ns1:CollectionNow><ns1:StdCollection><ns1:collectionName>myTestDir</ns1:collectionName></ns1:StdCollection></ns1:CollectionNow></ns1:DataGridObject><ns1:Metadata><ns1:AVU-pairs><ns1:attribute>$file</ns1:attribute><ns1:value>doesNotEndWith_1_3_5</ns1:value></ns1:AVU-pairs></ns1:Metadata></ns1:StdParams></ns1:IngestMetadataOp></ns1:Operation></ns1:Step></ns1:Flow></ns1:Flow></ns1:Flow></ns1:Flow></ns1:DataGridRequest>

