#!/bin/bash

# require at least two arguments
if [ $# -lt 2 ]; then
  exit
fi

# parse arguments and test them
if [ ! -e $1 ]; then 
  exit
fi
origfile=$1
shift
while [ 1 -lt $# ]; do
  args="$args $1"
  shift
done
# make sure the tmp area unique in /tmp
tmpdir=$proxyUserName`date "+%Y%m%d%H%M%S"`
mkdir /tmp/$tmpdir
newfile=$1


# Do the job
convert $args $origfile /tmp/$tmpdir/$newfile > /dev/null 2>&1

# Make sure it worked
if [ -e /tmp/$tmpdir/$newfile ]
then
  cat /tmp/$tmpdir/$newfile
fi

rm -rf /tmp/$tmpdir

exit 0
