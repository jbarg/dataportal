.\" For ascii version, process this file with
.\" groff -man -Tascii Smeta.1
.\"
.TH Smeta 1 "Jan 2002 " "Storage Resource Broker" "User SRB Commands"
.SH NAME
Smeta \- modifies metadata information about SRB data objects.
.SH SYNOPSIS
.TP 0.6i
.B Smeta
.BI "\-i \-I " metaAttrNameEqValue
.RB "[ [" \-I
.IR metaAttrNameEqValue "] ... ] " dataName
.br
.TP 0.6i
.B Smeta
.BI "\-u " "metadataIndex metaAttrNameEqValue dataName"
.br
.TP 0.6i
.B Smeta
.BI "\-d " "metadataIndex dataName"
.br
.TP 0.6i
.B Smeta
.BI "\-c \-i \-I " metaAttrNameEqValue
.RB "[ [" \-I
.IR metaAttrNameEqValue "] ... ] " collectionName
.br
.TP 0.6i
.B Smeta
.BI "\-c \-u " "metadataIndex metaAttrNameEqValue collectionName"
.br
.TP 0.6i
.B Smeta
.BI "\-c \-d " "metadataIndex collectionName"
.br
.TP 0.6i
.B Smeta
.RB [ \-R "] [" \-I
.I metaAttrNameOrCondition
.RB [ \-I
.IR metaAttrNameOrCondition "] ... ]"
.RB [ \-Y
.IR n ]
.RB [\-L
.IR n ]
.RB [ \-T
.IR dataType ] " dataName" | collectionName
.br
.TP 0.6i
.B Smeta
.BR "\-c " [ \-R ]
.RB [ \-I
.I metaAttrNameOrCondition
.RB [ \-I
.IR metaAttrNameOrCondition "] ... ]"
.RB [ \-Y
.IR n ]
.RB [ \-L
.IR n ]
.RB [ \-T
.IR dataType "] [" collectionName ]
.SH DESCRIPTION
.B "Smeta "
provides the facility for inserting, deleting, updating and
accessing meta-data on data object
.IR dataName " or collection " collectionName .
.sp
Currently, we support ten string attributes for data objects
visible as 
.B UDSMD0, UDSMD1, ... UDSMD9
and two integer  attributes visible as
.BR "UDIMD0 and UDIMD1" .
Similarly, we support ten string attributes for collections
visible as
.B UDSMD_COLL0, UDSMD_COLL1, ... UDSMD9_COLL
and two integer attributes visible as
.BR "UDIMD_COLL0 and UDIMD_COLL1" .
Note that the sets may increase over time per user requests.
The names are generic with the idea that users remap them at
the application level. Owners and users with 'all' access
permission are permitted to insert, delete, and update the
metadata. Users with 'read' permission can view the metadata.
.sp
For insertion,
.I metaAttrNameEqValue
is used to provide the metadata as a pair of meta-attribute
name and value conjoined with '=' sign. When inserted,  a new
metadata row is created and a unique integral identifier
.I metadataIndex
is created. This identifier can be used during updates and
deletion of specific rows of metadata.
.sp
When Querying, the user has two options for specifying the
names of meta attributes: the meta-attribute name can be
specified by itself in which case, the value for that name is
retrieved, or a meta-attribute condition can be specified as
a pair of meta-attribute name and value conjoined with
conditional sign. Values can be numbers or single-quoted character
strings with possible wild-card characters,  *  and  ?. The
conditions supported are  =, >, <,  >=, <=, <>, like, not like,
in, not in, between and not between.
.sp
A user can query to discover datasets, using both collection and
dataset metadata. When the 'c' option is used, discovery is
limited only to collections, and metadata relevant to collections
are only required. With the 'c' option, if
.I collectionName
is not given, then the search is made for all collections in the
catalog.
.PP
.SH "OPTIONS"
.TP 0.5i
.B "\-h "
display command options
.TP 0.5i
.B "\-i "
insert meta-data
.TP 0.5i
.B "\-u "
update meta-data
.TP 0.5i
.B "\-d "
delete meta-data
.TP 0.5i
.B "\-c "
defines that the insert, update, and deletes are for collection
metadata; in query mode the option implies that only collections
need to be displayed.
.TP 0.5i
.B "\-R "
recursively view meta-data under
.IR collectionName .
If this option is not used then the meta-data is given for
.I dataName
(the value can have wild cards).
.TP 0.5i
.B "\-T "
.I dataType
gets meta-data of particular data type (the value can have
wild cards)
.TP 0.5i
.B "\-Y "
.BI [ number "] "
controls display format.
.br
Without -Y, information is displayed one item-per-line with each
attribute spaced at DEFAULT_FIELD_WIDTH characters.
.br
With -Y 0 will display in vertical, one attribute-per-line format.
.br
With Y n, n > 0, information is displayed one item-per-line with each
attribute spaced at
.I number
characters.  
.br
With Y -1, information is displayed without headers, with each item
quoted and separated by a blank and with no row control.
.TP 0.5i
.B "\-L "
.BI [ number "] "
controls number of items displayed at a time under user's
control. 
.br
Without  -L, DEFAULT_ROW_COUNT items of information is displayed
at a time.
.br
With L n, n > 0, n items are displayed at a time.
.SH "SEE ALSO"
.BR Sls (1),
.BR Schmod (1)
.SH "Examples"
Insert a new set of metadata for the
.I dataObject
foo.txt in current collection:
.br
.B Smeta -i -I "UDSMD1=abcedeff" -I UDSMD5 = 'rrrr' -I "UDIMD1=5577" foo.txt
.br
Insert another set of metadata for the same object:
.br
.B Smeta -i -I "UDIMD0=2222" -I "UDIMD1=5555" foo.txt
.br
Display all the metadata  for the object:
.br
.B Smeta foo.txt
.br
Display all the metadata for all objects in current collection:
.br
.B Smeta .
.br
Delete metadata for the object which has the metadata index = 1
(all sets of metadata for an object are given integral numbers
for identification):
.br
.B Smeta -d 1 foo.txt
.br
Update the value of the 7th string metadata for the object:
.br
.B Smeta -u 0 "UDSMD6='trert'" foo.txt
.br
Display the first and second string metadata for all objects
in the collection where the second metadata has a 'c'
(possibly  later) followed by 'e':
.br
.B Smeta -I "UDSMD1 like '*c*e*'" -I UDSMD0 .
.SH "BUGS"
Currently there is no access control on metadata.
