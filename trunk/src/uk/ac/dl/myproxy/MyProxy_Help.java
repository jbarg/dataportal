/*
 * MyProxy_Help.java
 *
 * Created on 17 May 2004, 11:50
 */
package uk.ac.dl.myproxy;

import javax.swing.event.*;
import java.awt.*;
/**
 *
 * @author  gjd37
 */
public class MyProxy_Help extends javax.swing.JFrame {
    
    private String last = this.getClass().getResource("help.html").toString();
    private String last2 = this.getClass().getResource("help.html").toString();
    private boolean lastClicked = false;
    
    /** Creates new form MyProxy_Help */
    public MyProxy_Help() {
        super("Help");
        initComponents();
        getThePage(this.getClass().getResource("help.html").toString());
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        jPopupMenu1 = new javax.swing.JPopupMenu();
        back = new javax.swing.JMenuItem();
        jSeparator1 = new javax.swing.JSeparator();
        close = new javax.swing.JMenuItem();
        jScrollPane1 = new javax.swing.JScrollPane();
        jEditorPane1 = new javax.swing.JEditorPane();

        back.setText("Back");
        back.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                backActionPerformed(evt);
            }
        });

        jPopupMenu1.add(back);

        jPopupMenu1.add(jSeparator1);

        close.setText("Close\n");
        close.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closeActionPerformed(evt);
            }
        });

        jPopupMenu1.add(close);

        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });

        jScrollPane1.setPreferredSize(new java.awt.Dimension(492, 525));
        jEditorPane1.setEditable(false);
        jEditorPane1.setPreferredSize(new java.awt.Dimension(430, 525));
        jEditorPane1.addHyperlinkListener(new javax.swing.event.HyperlinkListener() {
            public void hyperlinkUpdate(javax.swing.event.HyperlinkEvent evt) {
                jEditorPane1HyperlinkUpdate(evt);
            }
        });
        jEditorPane1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                jEditorPane1MousePressed(evt);
            }
        });

        jScrollPane1.setViewportView(jEditorPane1);

        getContentPane().add(jScrollPane1, java.awt.BorderLayout.CENTER);

        pack();
    }//GEN-END:initComponents

    private void closeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closeActionPerformed
        // TODO add your handling code here:
        setVisible(false);
    }//GEN-LAST:event_closeActionPerformed

    private void backActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_backActionPerformed
        // TODO add your handling code here:
        
        getThePage(last2);
    }//GEN-LAST:event_backActionPerformed

    private void jEditorPane1MousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jEditorPane1MousePressed
        // TODO add your handling code here:
     
        if(evt.getButton() == 2 || evt.getButton() == 3) {
            if(last.equals("")) back.setEnabled(false);
            else back.setEnabled(true);
            jPopupMenu1.show(evt.getComponent(), evt.getX(),evt.getY());
        }
    }//GEN-LAST:event_jEditorPane1MousePressed

    private void jEditorPane1HyperlinkUpdate(javax.swing.event.HyperlinkEvent evt) {//GEN-FIRST:event_jEditorPane1HyperlinkUpdate
        // TODO add your handling code here:
        if(evt.getEventType() == HyperlinkEvent.EventType.ACTIVATED){
             last2 = last;
            last = evt.getURL().toString();
           
            //System.out.println(last);
            //System.out.println(last2);
            getThePage(evt.getURL().toString());
        }
    }//GEN-LAST:event_jEditorPane1HyperlinkUpdate
    
    /** Exit the Application */
    private void exitForm(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_exitForm
       // System.exit(0);
    }//GEN-LAST:event_exitForm
    
    public void getThePage(String url){
        
        setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
        try{
            jEditorPane1.setPage(url);
        
        }
        catch(Exception e){
            System.out.println("bad url "+e);
        }
        setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        new MyProxy_Help().show();
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem back;
    private javax.swing.JMenuItem close;
    private javax.swing.JEditorPane jEditorPane1;
    private javax.swing.JPopupMenu jPopupMenu1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JSeparator jSeparator1;
    // End of variables declaration//GEN-END:variables
    
}
