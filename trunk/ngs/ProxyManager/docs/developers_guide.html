<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
Proxy Manager Developer's Guide
</head>
<body>
<br>
<h2>Proxy Manager Developer's Guide</h2>
<p>This guide is for developers who are writing portlets that want
to access the GSI proxy credentials fetched by our Proxy Manager
portlet.</p>
<p>Proxy credentials are stored in the session context which can be
obtained from the <a
 href="http://jakarta.apache.org/turbine/turbine-2/apidocs/org/apache/turbine/util/RunData.html">RunData</a>
object. The GSI proxy credentials are stored in a <a
 href="http://www.extreme.indiana.edu/xportlets/project/release/ProxyStorage.html">ProxyStorage
</a>object as a hash table and can be
retrieved using
the key "proxies". Each proxy credential is stored in the hash table
under the
hash of the proxy credential's DN.
For portlet developers, we provide a <a
 href="http://www.extreme.indiana.edu/xportlets/project/release/ProxyManager.html">ProxyManager</a>
class
which provides convenient static methods for accessing these proxy
credentials, so that the developers don't even have to know the
implementation of <a
 href="http://www.extreme.indiana.edu/xportlets/project/release/ProxyStorage.html">ProxyStorage</a>,
which may be subject to change. The ProxyManager class provides
basically two ways to
retrieve proxy credentials:
</p>
<ul>
  <li>
    <p><b>Retrieve one "default" proxy credential:</b> getDefaultProxy()</p>
    <p>This is the most common retrieval method for portal developers
to use since usually only one proxy credential is needed to perform an
operation. The "default" proxy credential is specified by the user as
the proxy credential they want to use to perform
authentication/authorization. If the user only has one proxy credential
loaded, then that proxy credential is considered to be the default. </p>
  </li>
  <li>
    <p><b>Retrieve all proxy credentials:</b> getAllProxies()</p>
    <p>This allows a portal developer to retrieve all proxy credentials
from the user. </p>
  </li>
</ul>
<br>
<p>The following is a sample of code that shows how to use the proxy
retrieval
methods.</p>
<pre>    public void someFunction( RunData runData )<br>    {<br>      // Retrieve the JetspeedUser object<br>      HttpSession session = runData.getSession(); <br>      GSSCredential proxy = ProxyManager.getDefaultProxy(session);<br>      if(proxy == null) {<br>         // proxy may be null if anything goes wrong<br>      } <br>      ...<br> <br>      // get all proxies<br>      try {<br>        Hashtable proxies = ProxyManager.getAllProxies(session);      <br>        Enumeration proxy_keys = proxies.keys();<br>        while ( proxy_keys.hasMoreElements() ) {<br>          String hash = proxy_keys.nextElement();<br>          GSSCredential proxy = (GSSCredentialproxies.get(hash);<br>          ...<br>        }<br>      }<br>      catch(ProxyStorageException pse) {<br>         // exception handling<br>         ...<br>      }<br><br>      ...<br></pre>
<p>Click the link below for more detailed ProxyManager documentation. </p>
<p><a
 href="http://www.extreme.indiana.edu/xportlets/project/release/ProxyManager.html">JavaDoc
ProxyManager API documentation</a></p>
</body>
</html>
