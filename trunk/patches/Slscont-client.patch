Only in SRB-3.3.1-SDSC/: admin
Only in SRB-3.3.1-SDSC/: bin
Only in SRB-3.3.1-SDSC/: config.guess
Only in SRB-3.3.1-SDSC/: config.rescue
Only in SRB-3.3.1-SDSC/: config.sub
Only in SRB-3.3.1-SDSC/: configure
Only in SRB-3.3.1-SDSC/: configure.in
Only in SRB-3.3.1-SDSC/: configure.readme.srbteam
Only in SRB-3.3.1-SDSC/: COPYRIGHT
Only in SRB-3.3.1-SDSC/: CVS
Only in SRB-3.3.1-SDSC/: data
Only in SRB-3.3.1-SDSC/: errMsg
Only in SRB-3.3.1-SDSC/: installServer.pl
Only in SRB-3.3.1-SDSC/: install.sh
Only in SRB-3.3.1-SDSC/: jargon
Only in SRB-3.3.1-SDSC/: java
Only in SRB-3.3.1-SDSC/: Makefile.in
Only in SRB-3.3.1-SDSC/: matrix
Only in SRB-3.3.1-SDSC/: MCAT
Only in SRB-3.3.1-SDSC/: mk
Only in SRB-3.3.1-SDSC/: mySRB
Only in SRB-3.3.1-SDSC/: NT
Only in SRB-3.3.1-SDSC/: preload
Only in SRB-3.3.1-SDSC/: .project
Only in SRB-3.3.1-SDSC/: proxy
Only in SRB-3.3.1-SDSC/: python
Only in SRB-3.3.1-SDSC/: readme.dir
Only in SRB-3.3.1-SDSC/: src
Only in SRB-3.3.1-SDSC/: tape
Only in SRB-3.3.1-SDSC/: test
Only in SRB-3.3.1-SDSC/: unixIO
Only in SRB-3.3.1-SDSC/utilities: admin-bin
Only in SRB-3.3.1-SDSC/utilities: bin
Only in SRB-3.3.1-SDSC/utilities: CVS
Only in SRB-3.3.1-SDSC/utilities: envFiles
Only in SRB-3.3.1-SDSC/utilities: include
Only in SRB-3.3.1-SDSC/utilities: Makefile.in
Only in SRB-3.3.1-SDSC/utilities: man
Only in SRB-3.3.1-SDSC/utilities: obj
Only in SRB-3.3.1-SDSC/utilities: ping
Only in SRB-3.3.1-SDSC/utilities: README.utilities
Only in SRB-3.3.1-SDSC/utilities/src: bloadLib.c
Only in SRB-3.3.1-SDSC/utilities/src: bunloadLib.c
Only in SRB-3.3.1-SDSC/utilities/src: CVS
Only in SRB-3.3.1-SDSC/utilities/src: getsrbobj.c
Only in SRB-3.3.1-SDSC/utilities/src: Sannotate.c
Only in SRB-3.3.1-SDSC/utilities/src: Sappend.c
Only in SRB-3.3.1-SDSC/utilities/src: Sattrs.c
Only in SRB-3.3.1-SDSC/utilities/src: Sauth.c
Only in SRB-3.3.1-SDSC/utilities/src: Sbkupsrb.c
Only in SRB-3.3.1-SDSC/utilities/src: Sbload.c
Only in SRB-3.3.1-SDSC/utilities/src: Sbregister.c
Only in SRB-3.3.1-SDSC/utilities/src: SbregisterInfoFile.sample
Only in SRB-3.3.1-SDSC/utilities/src: Sbunload.c
Only in SRB-3.3.1-SDSC/utilities/src: Scat.c
Only in SRB-3.3.1-SDSC/utilities/src: Scd.c
Only in SRB-3.3.1-SDSC/utilities/src: Schdefres.c
Only in SRB-3.3.1-SDSC/utilities/src: Schhost.c
Only in SRB-3.3.1-SDSC/utilities/src: Schksum.c
Only in SRB-3.3.1-SDSC/utilities/src: Schmod.c
Only in SRB-3.3.1-SDSC/utilities/src: Scp.c
Only in SRB-3.3.1-SDSC/utilities/src: SdelValue.c
Only in SRB-3.3.1-SDSC/utilities/src: Sdir.c
Only in SRB-3.3.1-SDSC/utilities/src: Sds2db.c
Only in SRB-3.3.1-SDSC/utilities/src: Senv.c
Only in SRB-3.3.1-SDSC/utilities/src: Serror.c
Only in SRB-3.3.1-SDSC/utilities/src: Sexit.c
Only in SRB-3.3.1-SDSC/utilities/src: Sgetappend.c
Only in SRB-3.3.1-SDSC/utilities/src: Sget.c
Only in SRB-3.3.1-SDSC/utilities/src: SgetColl.c
Only in SRB-3.3.1-SDSC/utilities/src: SgetD.c
Only in SRB-3.3.1-SDSC/utilities/src: SgetR.c
Only in SRB-3.3.1-SDSC/utilities/src: SgetT.c
Only in SRB-3.3.1-SDSC/utilities/src: SgetU.c
Only in SRB-3.3.1-SDSC/utilities/src: sgetw.c
Only in SRB-3.3.1-SDSC/utilities/src: Shelp.c
Only in SRB-3.3.1-SDSC/utilities/src: Singestgroup.c
Only in SRB-3.3.1-SDSC/utilities/src: Singesttoken.c
Only in SRB-3.3.1-SDSC/utilities/src: Singestuser.c
Only in SRB-3.3.1-SDSC/utilities/src: Sinit.c
Only in SRB-3.3.1-SDSC/utilities/src: Sln.c
Only in SRB-3.3.1-SDSC/utilities/src: Sls.c
Only in SRB-3.3.1-SDSC/utilities/src: Slscont.c
Only in SRB-3.3.1-SDSC/utilities/src: Smeta.c
Only in SRB-3.3.1-SDSC/utilities/src: Smkcont.c
Only in SRB-3.3.1-SDSC/utilities/src: Smkdir.c
Only in SRB-3.3.1-SDSC/utilities/src: SmodColl.c
Only in SRB-3.3.1-SDSC/utilities/src: SmodD.c
Only in SRB-3.3.1-SDSC/utilities/src: SmodE.c
Only in SRB-3.3.1-SDSC/utilities/src: SmodifyUser.c
Only in SRB-3.3.1-SDSC/utilities/src: SmodR.c
Only in SRB-3.3.1-SDSC/utilities/src: Smv.c
Only in SRB-3.3.1-SDSC/utilities/src: Spasswd.c
Only in SRB-3.3.1-SDSC/utilities/src: Spcommand.c
Only in SRB-3.3.1-SDSC/utilities/src: Sphymove.c
Only in SRB-3.3.1-SDSC/utilities/src: Spullmeta.c
Only in SRB-3.3.1-SDSC/utilities/src: Spushmeta.c
Only in SRB-3.3.1-SDSC/utilities/src: Sput.c
Only in SRB-3.3.1-SDSC/utilities/src: sputw.c
Only in SRB-3.3.1-SDSC/utilities/src: Spwd.c
Only in SRB-3.3.1-SDSC/utilities/src: Squery.c
diff -ru SRB-3.3.1-SDSC/utilities/src/srbClientUtil.c srb-patches/Slscont client patch/utilities/src/srbClientUtil.c
--- SRB-3.3.1-SDSC/utilities/src/srbClientUtil.c	2005-06-29 13:31:28.000000000 +0100
+++ srb-patches/Slscont client patch/utilities/src/srbClientUtil.c	2005-08-01 13:07:54.000000000 +0100
@@ -3487,19 +3487,22 @@
 {
     int i, inInx, outInx;
     char *dataName, *dirty, *inStr, *outStr;
+    char *collName;
     char *dirtySz, *myDirtySz;
     int real_row_count;
 
     if (myresult->result_count == 0)
         return;
-
     dataName = (char *) getFromResultStruct (myresult,
       dcs_tname[DATA_NAME], dcs_aname[DATA_NAME]);
 
     dirty = (char *) getFromResultStruct (myresult,
       dcs_tname[IS_DIRTY], dcs_aname[IS_DIRTY]);
 
-    if (dataName == NULL || dirty == NULL)
+    collName = (char *) getFromResultStruct (myresult,
+      dcs_tname[DATA_GRP_NAME], dcs_aname[DATA_GRP_NAME]);
+
+    if (dataName == NULL || dirty == NULL || collName == NULL)
 	return;
 
     outInx = 1;
@@ -3511,7 +3514,9 @@
 
     for (inInx = 1; inInx < myresult->row_count; inInx ++) { 
 	if (strcmp (&dataName[inInx*MAX_DATA_SIZE], 
-	 &dataName[(inInx-1) * MAX_DATA_SIZE]) == 0) {
+	 &dataName[(inInx-1) * MAX_DATA_SIZE]) == 0 && 
+	   strcmp (&collName[inInx*MAX_DATA_SIZE],
+	 &collName[(inInx-1) * MAX_DATA_SIZE]) == 0	) {
 	    if (myDirtySz != NULL && atoi (&dirty[inInx]) > 0) 
 		myDirtySz = &dirtySz[inInx];
 	    real_row_count--;
@@ -3872,10 +3877,13 @@
         return (0);
     } else {
 	status = lstatus;
-        fprintf (stderr, "localToSrbFileCopy error for %s/%s\n",
-         targColl, targObj);
-        srb_perror (2, (int) status, "", SRB_RCMD_ACTION|SRB_LONG_MSG);
-
+        if (status != COLLECTION_NOT_IN_CAT && 
+	  status != DATA_NOT_IN_COLLECTION) {    /* rsync depends on this
+						  * error to make new coll */
+            fprintf (stderr, "localToSrbFileCopy error for %s/%s\n",
+              targColl, targObj);
+            srb_perror (2, (int) status, "", SRB_RCMD_ACTION|SRB_LONG_MSG);
+	}
         return ((int) status);
     }
 }
@@ -5417,8 +5425,15 @@
         return(in_fd);
     }
 
-    /* Check whether the target file exists */
 
+    /***  RAJA Apr 6th 2005 - added a check to remove any conditions that are there ***/
+    if (strlen(inCondition) > 0) {
+      if ((buf = strstr(localPath,inCondition)) != NULL)
+	*buf = '\0';
+    } 
+    /***  RAJA Apr 6th 2005 - added a check to remove any conditions that are there for target name ***/
+    /* Check whether the target file exists */
+    
 #ifdef _WIN32
     status = stat_file (localPath, &statbuf);
 #else
@@ -6876,7 +6891,10 @@
       /* RAJA Feb 10 2005 changed to includ empty names and null names  for container 0 *
         sprintf(qval[CONTAINER_NAME], " is not null");
       */
-      sprintf(qval[CONTAINER_NAME], "is not null && <> ''");
+      /* PETER July 15 2005 amended as per RAJA instructions to fix Slscont *
+        sprintf(qval[CONTAINER_NAME], "is not null && <> ''");
+      */
+        sprintf(qval[CONTAINER_NAME], "is not null");
     }
     selval[CONTAINER_NAME] = 1;
 
Only in SRB-3.3.1-SDSC/utilities/src: srbparget.c
Only in SRB-3.3.1-SDSC/utilities/src: srbpget.c
Only in SRB-3.3.1-SDSC/utilities/src: srbpput.c
Only in SRB-3.3.1-SDSC/utilities/src: Sregister.c
Only in SRB-3.3.1-SDSC/utilities/src: Sregisterlocation.c
Only in SRB-3.3.1-SDSC/utilities/src: Sregisterresource.c
Only in SRB-3.3.1-SDSC/utilities/src: Sreplcont.c
Only in SRB-3.3.1-SDSC/utilities/src: Sreplicate.c
Only in SRB-3.3.1-SDSC/utilities/src: Srm.c
Only in SRB-3.3.1-SDSC/utilities/src: Srmcont.c
Only in SRB-3.3.1-SDSC/utilities/src: Srmdir.c
Only in SRB-3.3.1-SDSC/utilities/src: Srmticket.c
Only in SRB-3.3.1-SDSC/utilities/src: Srmtrash.c
Only in SRB-3.3.1-SDSC/utilities/src: Srsync.c
Only in SRB-3.3.1-SDSC/utilities/src: Ssfstage.c
Only in SRB-3.3.1-SDSC/utilities/src: Ssh.c
Only in SRB-3.3.1-SDSC/utilities/src: Sstage.c
Only in SRB-3.3.1-SDSC/utilities/src: Ssyncd.c
Only in SRB-3.3.1-SDSC/utilities/src: Ssyncont.c
Only in SRB-3.3.1-SDSC/utilities/src: Stcat.c
Only in SRB-3.3.1-SDSC/utilities/src: Sticket.c
Only in SRB-3.3.1-SDSC/utilities/src: Stls.c
Only in SRB-3.3.1-SDSC/utilities/src: Stoken.c
Only in SRB-3.3.1-SDSC/utilities/src: Sufmeta.c
Only in SRB-3.3.1-SDSC/utilities/src: Szone.c
Only in SRB-3.3.1-SDSC/utilities: test
