.\" For ascii version, process this file with
.\" groff -man -Tascii Sufmeta.1
.\"
.TH Sufmeta 1 "Jan 2002 " "Storage Resource Broker" "User SRB Commands"
.SH NAME
Sufmeta \- modifies attribute-value-unit triplets of user-defined metadata information about SRB data objects.
.SH SYNOPSIS
.TP 0.6i
.BI  "Sufmeta " "AttName  AttVal" " [ " AttUnit " ] " "datasetName"
.br
.TP 0.6i
.BI  "Sufmeta -c " "AttName  AttVal" " [ " AttUnit " ] " "collectionName"
.br
.TP 0.6i
.BI  "Sufmeta -u "  "AttName  AttVal" " [ " AttUnit " ] " "userName@somainName"
.br
.TP 0.6i
.BI  "Sufmeta -r " "AttName  AttVal" " [ " AttUnit " ] " "resourceName"
.br
.TP 0.6i
.BI  "Sufmeta [-d] -f " "metadataFileName separator datasetName"
.br
.TP 0.6i
.BI  "Sufmeta -c -f " "metadataFileName separator collectionName"
.br
.TP 0.6i
.BI  "Sufmeta -r -f " "metadataFileName separator resourceName"
.br
.TP 0.6i
.BI  "Sufmeta -u -f " "metadataFileName separator"
.br
.TP 0.6i
.BI  "Sufmeta -D -f " "metadataFileName separator"
.br
.TP 0.6i
.BI  "Sufmeta [-c|-u|-r] -Q [-z "
.IR  zone " ] " "AttName Op AttVal" " [ " "AttName Op AttVal"   " ] ..."
.br
.TP 0.6i
.BI  "Sufmeta " "datasetName|collectionName"
.br
.TP 0.6i
.BI  "Sufmeta -u " "userName@domainName"
.br
.TP 0.6i
.BI  "Sufmeta -r " "resourceName"
.TP 0.6i
.BI  "Sufmeta -R -d  " "AttName AttValue  datasetName"
.br
.TP 0.6i
.BI  "Sufmeta -R -c  " "AttName AttValue  collectionName"
.br
.TP 0.6i
.BI  "Sufmeta -R -r  " "AttName AttValue resourceName"
.br
.TP 0.6i
.BI  "Sufmeta -R -u  " "AttName AttValue userName@domainName"
.br
.TP 0.6i
.BI  "Sufmeta -e [ "  "inSRBMetadataFileName" " ]"
.IR  "inSRBExtractorStyleSheet datasetName"
.br
.TP 0.6i
.BI  "Sufmeta -C 1  " "sourceCollectionName targetDataName"
.br
.TP 0.6i
.BI  "Sufmeta -C 2  " "sourceCollectionName targetCollectionName"
.br
.TP 0.6i
.BI  "Sufmeta -C 3  " "sourceDataName targetDataName"
.br
.TP 0.6i
.BI  "Sufmeta -C 4  " "sourceDataName targetCollectionName"
.br

.SH DESCRIPTION
.B "Sufmeta "
provides the facility for inserting, deleting, updating and
accessing attribute-value type user-defined meta-data on SRB objects
.IR dataName ", " collectionName ", " resourceName 
.BI " or " "userName@domainName."
.sp

The first four synopses ingest
.IR "AttName  AttValue  [AttUnit]"  "triplets into a single dataObject, collection user or resource".
.sp
The next four synopses is used to  bulk ingest metadata from 
.IR metadataFileName " for a single dataObject, collection, resource or user. The "  separator " is a single character used to separate the triples in  a line in " metadataFileName. " 
.sp
The seventh synopsis is used to bulk ingest triplets into multiple dataObjects.
.sp
The eighth synopsis allows querying of the four types of srbObjects separately using upto
five conditions of the form
.IR "AttName Op AttVal".  " AttVal"
can be  a number or a  single-quoted character
strings with possible wild-card characters,  *  and  ?. The
conditions supported are  =, >, <,  >=, <=, <>, like, not like,
in, not in, between and not between.
.sp
The next three synopses show metadata triplets for a given 
.IR dataName ", " collectionName ", " resourceName 
.BI " or " "userName@domainName." 
The next four synopses (-R option)  used to delete AttName AttValue pair metadata from
.IR dataName ", " collectionName ", " resourceName 
.BI " or " "userName@domainName." 
.sp
The next synopsis (-e option) allows for (remote) extracting of metadata using a T-language template stored in the SRB by extracting the metadata  either from the dataset itself or from another metadata file which is also stored in the SRB.
.sp
The next four synopses (-C option)  are used to copy metadata from
one SRB object/collection to another SRB object/collection.
.PP
.SH "OPTIONS"
.TP 0.5i
.B "\-h "
display command options
.TP 0.5i
.B "\-d "
operate on metadata for data objects
.TP 0.5i
.B "\-c "
operate on metadata for collections
.TP 0.5i
.B "\-u "
operate on metadata for users
.TP 0.5i
.B "\-r "
operate on metadata for resources
.TP 0.5i
.B "\-Q "
defines a query operation
.TP 0.5i
.B "\-f "
defines bulk load option with metadata stored in a file.
.TP 0.5i
.B "\-e "
defines bulk load option with metadata extracted from a  srbObject or extracted from the targetObject itself.
.TP 0.5i
.B "\-z "
.I zone
option applies to the second synopsis and is used to perform the Sls operation on a particular zone.
If ALL is used for 
.I zone 
then every zone known to the current zone will be queried. 
.I zone
can have wild cards.
.SH "Examples"
The first four  synopses [-dcur] are used to ingest metadata
   for srbData, srbCollections  srbUsers and srbResources  respectively.
The next four synopses [-dcur -f] are used to ingest bulk metadata
   for srbData, srbCollections,srbUsers and srbResources  respectively.
The next  synopsis [-D -f]are used to ingest bulk metadata
   for srbData for many datasets .
The next four synopses [-dcur -Q] are used to query metadata
   for srbData and srbCollections respectively.
The last three synopses are used to get all metadata values
 for srbData, srbCollections, srbUsers and srbResources.
Use '*' and '?' for wildcards; assumes an and between conditions
Sample Usage:
   Sufmeta alpha 200 foo.dat
   Sufmeta -c alpha 200 myColl
   Sufmeta -c beta bar myColl
   Sufmeta -c beta 200 myColl
   Sufmeta -Q  alpha = 200
   Sufmeta -Q  -c alpha = 200 beta = bar
   Sufmeta -Q  -c alpha = 200 beta like '*a*' 
   Sufmeta -Q  -c alpha '>' 100 beta like '*a*' 
   Sufmeta foo.dat
   Sufmeta -f mdFile '|' ticket123.dat
   Sufmeta -c -f mdFile '|' ticket123.dat
     where mdFile is of the form:
   ticketnum|es2345
   car name|ford escort
   driver name|john q. public
   numplate|123455
   speed|89|kmph|overspeed
   fine|55|dollars

   Sufmeta -D -f mdFileMult '|'
     where mdFileMultis of the form:
   SETMINMETADATANUM=GIVENPERDATA
   /home/srb/rajatest|Sput.c|11|ticketnum|es2345
   /home/srb/rajatest|Sput.c|12|car name|ford escort
   /home/srb/rajatest|Sput.c|13|driver name|john q. public
   /home/srb/rajatest|Srm.c|11|numplate|123455
   /home/srb/rajatest|Srm.c|12|speed|89|kmph|overspeed
 
   The value for SETMINMETADATANUM can be GIVENPERDATA in which case, the value for
     the metadatanum field is to be given in the third value in each line. 
   The value for SETMINMETADATANUM can be GETFROMMCAT in which case the value is
     generated internally by the SRB system. In this case there is no need for the metadatanum
     field in the metadatfile.
   The value for SETMINMETADATANUM can be a number (say 0), then the value is used
     for the first triplet for each given data object and incremented for subsequent
     metadata triplets for that object. This is useful when you know that the metadata
     is being freshly loaded and you can start at 0 or some constant number. This will
     speedup the load compared to the GETFROMMCAT option. 


.SH "SEE ALSO"
.BR Smeta (1)

