<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns1:DataGridRequest requestType="synchronous" xmlns:ns1="http://www.teragrid.org/schemas/datagrid"><ns1:GridUser><ns1:userID>Matrix-demo</ns1:userID><ns1:organization><ns1:organizationName>sdsc</ns1:organizationName></ns1:organization><ns1:challenge-Response>******</ns1:challenge-Response><ns1:homeDirectory>/home/Matrix-demo.sdsc</ns1:homeDirectory><ns1:defaultStorageResource>sfs-tape2-dtf</ns1:defaultStorageResource></ns1:GridUser><ns1:VOInfo><ns1:server>orion.sdsc.edu</ns1:server><ns1:port>7824</ns1:port></ns1:VOInfo><ns1:Flow flowID="outerFlow"><ns1:variables><ns1:part name="locationOfFile"><ns1:string>noValue</ns1:string></ns1:part><ns1:part name="md5Sum"><ns1:string>noValue</ns1:string></ns1:part><ns1:part name="collectionNow"><ns1:string>libExample3</ns1:string></ns1:part></ns1:variables><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Flow flowID="processFilesFlow"><ns1:variables><ns1:part name="collectionList"><ns1:string>empty</ns1:string></ns1:part></ns1:variables><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Flow flowID="getListingFlow"><ns1:variables/><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Step stepID="getListingStep"><ns1:UserDefinedRules name="afterExit"><ns1:condition><ns1:simpleQuery>true</ns1:simpleQuery></ns1:condition><ns1:action name="true"><ns1:actionString>SET collectionList = getProperty(THIS, "result.listResult.listing")</ns1:actionString></ns1:action></ns1:UserDefinedRules><ns1:Operation><ns1:ListOp><ns1:StdParams><ns1:collection><ns1:StdCollection><ns1:collectionName>$collectionNow</ns1:collectionName></ns1:StdCollection></ns1:collection></ns1:StdParams></ns1:ListOp></ns1:Operation></ns1:Step></ns1:Flow><ns1:Flow flowID="forEachFlow"><ns1:variables/><ns1:flowLogic><ns1:forEachLoop><ns1:iterationSet iterationVariableName="file"><ns1:collectionListing><ns1:CollectionListReference><ns1:variableName>$collectionList</ns1:variableName></ns1:CollectionListReference></ns1:collectionListing></ns1:iterationSet><ns1:parallel-init>0</ns1:parallel-init><ns1:parallel-increment>1</ns1:parallel-increment></ns1:forEachLoop></ns1:flowLogic><ns1:Flow flowID="forEachItrFlow"><ns1:variables/><ns1:flowLogic><ns1:sequential/></ns1:flowLogic><ns1:Step stepID="getLocation"><ns1:UserDefinedRules name="afterExit"><ns1:condition><ns1:simpleQuery>true</ns1:simpleQuery></ns1:condition><ns1:action name="true"><ns1:actionString>SET locationOfFile = getProperty(THIS, "result.getPhysicalLocationResult.physicalLocation")</ns1:actionString></ns1:action></ns1:UserDefinedRules><ns1:Operation><ns1:GetPhysicalLocationOp><ns1:StdParams><ns1:logicalResource><ns1:StdDataSet><ns1:dataIdentifier>$collectionNow+"/"+$file</ns1:dataIdentifier></ns1:StdDataSet></ns1:logicalResource></ns1:StdParams></ns1:GetPhysicalLocationOp></ns1:Operation></ns1:Step><ns1:Step stepID="executeMD5-Metadata"><ns1:Operation><ns1:ExecuteProcessOp><ns1:StdParams><ns1:exeURI>md5</ns1:exeURI><ns1:input name="$locationOfFile"><ns1:string>$locationOfFile</ns1:string></ns1:input><ns1:std_out><ns1:StdStreamData><ns1:variable>$md5Sum</ns1:variable></ns1:StdStreamData></ns1:std_out></ns1:StdParams></ns1:ExecuteProcessOp></ns1:Operation></ns1:Step><ns1:Step stepID="ingestMeta"><ns1:Operation><ns1:IngestMetadataOp><ns1:StdParams><ns1:DataGridObject><ns1:DataSetNow><ns1:StdDataSet><ns1:dataIdentifier>$collectionNow+"/"+$file</ns1:dataIdentifier></ns1:StdDataSet></ns1:DataSetNow></ns1:DataGridObject><ns1:Metadata><ns1:AVU-pairs><ns1:attribute>md5_Sum</ns1:attribute><ns1:value>$md5Sum</ns1:value></ns1:AVU-pairs></ns1:Metadata></ns1:StdParams></ns1:IngestMetadataOp></ns1:Operation></ns1:Step></ns1:Flow></ns1:Flow></ns1:Flow></ns1:Flow></ns1:DataGridRequest>

