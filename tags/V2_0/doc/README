# MASS CFG File for Node Customization
# MDOHERTY 28/1/2004
#

Why MASS?
=========

ADS is a vitual tape system. This means in just mimics a tape drive. You bascially throw stuff at it. The commands are obtuse (to say the least!) and it has no backup management features. It is a bit of a dinosaur. Just think of it as tape drive attached to your computer. I wrote MASS (Making ADS Simple System) to catalog backups and make using ADS more simple from the native cryptic commands.

MASS Setup and Install
======================
You must have first installed all the ADS software. You can get this from

 http://www.e-science.clrc.ac.uk/web/services/datastore

Most of the docs are out of date and useful things like help no longer work. Also note that if you build it on Linux, it will not work properly. You need to make the following changes...


Unpack the TAR containing MASS. MASS is all written in shell script. Why? Because I wanted to move it between syetems and rely on the lowest common denominator.Many of the systems it runs on do not have complilers.

To pick up commands by defauly you should define MASS_HOME in your login profile (.bash_profile)
i.e.

export $MASS_HOME=....

Also remember to put the MASS_HOME/bin directory in you PATH (best to use .bash_profile)

The config file for MASS, used in cron jobs etc is /etc/masstab. Just change the vairables in masstab and they will be picked up by all the MASS tools


The crontab entry should read

 /root/scripts/mass/bin/mass_ctl >& \
 "/root/scripts/mass/log/mass_${day:-$(date+\%a_\%j)}.log"

The time is obviously up to you, but configure it to run once a day.

MASS Admin
==========

The disk name is the device for DUMP backups and the name of the mount point for TAR backups

MASS Recovery
=============

Mass deliberataly has no recovery features built into the utilities. The reason for this is that I did not want to accidently recover a disk. So this sections goes about telling you how to interpret, find and recover backups created with MASS

Hacking MASS files
==================

All contents of an index file (.idx) must be in UPPER CASE!. You should to use mass_adm for creating these unless you have a REALLY GOOD reason.


Useful commands outside of MASS

	datastore pool query raldba

Will list all the Pools you have

	datastore create raldba test01 32gb pool dev

Will create a 32Gb file in the ADS pool DEV for ADS user raldba

	sysreq flfsys rule add RALDBA 130.246.72.53 root \* \* RWCPALX

Will allow the node 130.246.72.53 to use the ADS as user RALDBA (must be issued from a node that can ALREADY access the ADS)

If you want to use ADS qfiles i.e. you wnat to back up a disk that is larger than the ADS 48GB limit, then you must pre-create the datafiles as above. Use mass_adm to enter the file name separated by a "." as EXISTING ADS files.

MASS Futures
============

While there is some error checking for conditions In MASS, it does rely on you not making stupid mistakes. I always planned to have more, but never had the time. Please feel free to do so if you want. I can always be reached at m.doherty@ieee.org if you get stuck.
