.\" For ascii version, process this file with
.\" groff -man -Tascii Sphymove.1
.\"
.TH Sphymove 1 "Jan 2005 " "Storage Resource Broker" "User SRB Commands"
.SH NAME
Sphymove \- moves an SRB files/collections to a new resource
.SH SYNOPSIS
.B Sphymove
.RB [ \-n
.IR replNum ]
.RB [ \-c
.IR container ]
.RB [ \-S
.IR targetResource ]
.RB [ \-P
.IR newpathName "] " srbFile " ... " 
.sp
.B Sphymove -b|r
.RB [ \-c
.IR container ]
.RB [ \-S
.IR targetResource ]
.RB [ \-s
.IR sourceResource "] " srbCollection " ... " 
.SH DESCRIPTION
.B "Sphymove "
moves one or more SRB objects to the
.I targetResource
(if given). The old copy is deleted and the MCAT catalog is
also updated.
.sp
It is implemented in 2 modes - the "file" mode or "collection" mode. 
The "file" mode which is the default mode, moves
one or more individual files. The "bulk" mode, which is triggered
with the -b or -r flags, is designed to move a large number of files
(recursively) in one or more SRB collections efficiently.
.sp
In the "file" mode, if the -P option is used, the object will be stored in
.IR newpathName .
Otherwise the object is stored in the default path for the
.IR targetResource.
.sp
The user should have at least 'write' access permission for
.IR srbFile.
If the -n option is specified, the
.IR replNum
copy will be moved.
If the -c option is specified, the files will be moved into the specified
.IR container.
The -c option overrides the -S option. 
.sp
The recursive move of a collection can be done either in bulk (-b) or 
or non-bulk mode (-r). 

In bulk mode, up to 200 files can be moved in a single 
(of many if necessary) move operation to improve efficient. 
It is designed to move a large number of small files.
.sp
But if the collection to be moved contains some large files (50 Mb and
up), the non-bulk mode may be better because the move will be done
using third party parallel I/O. If both the -b and -r options are
specified, the -b option will take precedent. 
.sp
It also accepts an optional -s 
option which specifies the Source Resource of the copy to be moved. If 
this option is specified, only SRB files stored in the given 
.IR sourceResource
will be moved. If the -s option is not used, all files that are not stored
in the
.IR targetResource
will be moved. 
.sp
It is important to note that the -s option
should be used whenever possible to eliminate unintended moves. Multiple
.IR sourceResources
can be specified using the "|" character as seperator. 
e.g., "resource1|resource2|resource3".
.sp
It should be noted that if multiple sourceResources are specified, the 
move operation will use the host of the first resource on the list to
launch the operation. Therefore, it is important to use the resource with
the most files to be moved as the first sourceResource.
  
.PP
.SH "OPTIONS"
.TP 0.5i
.B "\-h "
- Display command options
.TP 0.5i
.B "\-b "
- Specifies bulk move for moving large number of small files.
.TP 0.5i
.B "\-r "
- recurive non-bulk move for moving large files.
.TP 0.5i
.B "\-n "
.I replNum
- An integer denoting the replica number of the object to be moved.
.TP 0.5i
.B "\-P "
.I newpathName
- The physical path name of the new copy.
.TP 0.5i
.B "\-S "
.I targetResource
- The target resource of the move. If not specified, the default resource 
will be used as the target resource.
.TP 0.5i
.B "\-c "
.I container
- The target container of the move. The container must already exist 
before the move. The option overrides the -S option.
.TP 0.5i
.B "\-s "
.I sourceResource
- If specified, only files stored in this resource will be moved.

.SH "SEE ALSO"
.BR Smv (1),
.BR Sreplicate (1),
.BR Scp (1)

