.\" For ascii version, process this file with
.\" groff -man -Tascii S.1
.\"
.TH Szonesync.pl 1 "Jan 2005 " "Storage Resource Broker" "Admin SRB Commands"
.SH NAME
Szonesync.pl \- Synchronize information from another zone.
.SH SYNOPSIS
.B Szonesync.pl -[u|r|d] [-z zone] [-h]
.SH DESCRIPTION

This perl script synchronizes information between SRB zones, helping
to create an SRB federation of zones so that users can access data (if
access controls allow) across multiple zones.  It should be
periodically run by the SRB administrator to keep the local zone
up-to-date with other zones in the Federation.  It pulls information
from the other zone(s) and inserts it into the local zone MCAT via the
Spullmeta and Spushmeta commands.
.sp
In the Federated MCAT system, the local MCAT needs to have certain
information from the other zones.  For example, a list of users
(username and domain) for the remote zone is needed in the local MCAT,
although the password is kept only at the zone that is home for that
user.

Before sync'ing with another zone, you should make sure you do
not have name conflicts with any of the following:
  1) Domain names.  
  2) Resource names.
  3) Location names (locations with the same name are OK if they
     actually refer to the same location).

This script queries the local MCAT to find which zones exist (and are
active; zones marked as inactive are ignored) and where they are (host
ids) and then connects to each, retrieving the information, and
inserting it locally.  The Spullmeta and Spushmeta commands perform
the get and put of the information. 

It is assumed that the user has set the path to include the location
of the SRB S commands and has a valid .MdasEnv and .MdasAuth
for connecting to the local server.

It is also necessary that this local user id is registered as an
admin for this zone at the remote zone(s).  For example, the local
zone is "A", the remote is "B", and you are srbAdmin@Adomain
locally.  At B, there must be a user defined as being in Zone A,
with name srbAdmin@Adomain, with admin privileges (for zone A).
When this script, via Stoken, connects to the server at B, server B
will check with server A to verify srbAdmin@Adomain has the correct
password.

Szonesync.pl creates and cd's to a subdirectory ("SzonesyncTmpDir")
into which it creates a set of small text files which are used
with the Spullmeta/Spushmeta commands.
.SH "OPTIONS"
.TP 0.5i
.B "\-u "
do a user information (basic) syncronization
.TP 0.5i
.B "\-r "
do user information plus resource information syncronization
.TP 0.5i
.B "\-d "
do data information syncronization
.TP 0.5i
.B "\-z zone "
syncronize with the specified zone only

.TP 0.5i
.B "\-h "
display command options

.SH "SEE ALSO"
.BR "the zoneingest.pl script",
.BR Szone(1),
.BR "Java Admin Tool",
.BR "and see the top of the Szonesync.pl script

